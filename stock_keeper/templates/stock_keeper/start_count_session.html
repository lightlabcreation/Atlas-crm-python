{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}Start Count Session{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-amber-50/30 to-yellow-50/20">
    <!-- Enhanced Page Header -->
    <div class="bg-gradient-to-r from-amber-500 to-yellow-600 shadow-2xl border-b-4 border-amber-400">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
                <div class="space-y-2">
                    <div class="flex items-center gap-3">
                        <a href="{% url 'stock_keeper:cycle_count' %}" class="w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-white/30 transition-all duration-200">
                            <i class="fas fa-arrow-left text-white text-lg"></i>
                        </a>
                        <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                            <i class="fas fa-clipboard-list text-white text-xl"></i>
                        </div>
                        <div>
                            <h1 class="text-4xl font-bold text-white">Start Count Session</h1>
                            <p class="text-amber-100 text-lg">Configure and begin a new cycle count session</p>
                    </div>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-3">
                    <a href="{% url 'stock_keeper:cycle_count' %}" 
                       class="inline-flex items-center justify-center px-6 py-3 bg-white/20 backdrop-blur-sm text-white font-semibold rounded-xl hover:bg-white/30 transition-all duration-200 border border-white/30">
                        <i class="fas fa-arrow-left mr-2"></i>
                        Back to Cycle Count
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-3xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 overflow-hidden">
            <div class="bg-gradient-to-r from-slate-800 to-slate-900 px-6 py-6 border-b border-slate-600/50">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-xl flex items-center justify-center mr-4">
                        <i class="fas fa-cog text-slate-900 text-lg"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-white">Count Session Configuration</h2>
                        <p class="text-slate-300 text-sm">Set up your inventory counting session</p>
                    </div>
                </div>
            </div>
            
            <div class="p-8">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="space-y-8">
                        <div>
                            <label for="section" class="block text-sm font-semibold text-slate-700 mb-3">
                                Section/Area to Count
                            </label>
                            <select id="section" name="section" required 
                                    class="w-full border border-slate-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white/80 backdrop-blur-sm transition-all duration-200">
                                <option value="">Select a section</option>
                                <option value="Electronics Section A">Electronics Section A</option>
                                <option value="Electronics Section B">Electronics Section B</option>
                                <option value="Clothing Section A">Clothing Section A</option>
                                <option value="Clothing Section B">Clothing Section B</option>
                                <option value="Home & Garden">Home & Garden</option>
                                <option value="Sports & Outdoor">Sports & Outdoor</option>
                                <option value="Books & Media">Books & Media</option>
                                <option value="Automotive">Automotive</option>
                                <option value="Health & Beauty">Health & Beauty</option>
                                <option value="Toys & Games">Toys & Games</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="total_locations" class="block text-sm font-semibold text-slate-700 mb-3">
                                Estimated Total Locations
                            </label>
                            <input type="number" 
                                   id="total_locations" 
                                   name="total_locations" 
                                   min="1" 
                                   max="1000" 
                                   required
                                   class="w-full border border-slate-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white/80 backdrop-blur-sm transition-all duration-200"
                                   placeholder="{% trans 'e.g., 25' %}">
                            <p class="mt-2 text-sm text-slate-500">Estimated number of locations to count</p>
                        </div>
                        
                        <!-- Time Settings -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                                <label for="start_time" class="block text-sm font-semibold text-slate-700 mb-3">
                                    Start Time
                            </label>
                                <input type="time" 
                                       id="start_time" 
                                       name="start_time" 
                                       required
                                       class="w-full border border-slate-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white/80 backdrop-blur-sm transition-all duration-200"
                                       value="{{ current_time|time:'H:i' }}">
                                <p class="mt-2 text-sm text-slate-500">When to start the count session</p>
                        </div>
                        
                        <div>
                                <label for="estimated_duration" class="block text-sm font-semibold text-slate-700 mb-3">
                                    Estimated Duration (hours)
                            </label>
                            <input type="number" 
                                       id="estimated_duration" 
                                       name="estimated_duration" 
                                       min="0.5" 
                                       max="12" 
                                       step="0.5"
                                   required
                                       class="w-full border border-slate-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white/80 backdrop-blur-sm transition-all duration-200"
                                       placeholder="{% trans 'e.g., 2.5' %}">
                                <p class="mt-2 text-sm text-slate-500">Expected time to complete the count</p>
                            </div>
                        </div>
                        
                        <div>
                            <label for="count_notes" class="block text-sm font-semibold text-slate-700 mb-3">
                                Session Notes
                            </label>
                            <textarea id="count_notes" 
                                      name="count_notes" 
                                      rows="3" 
                                      class="w-full border border-slate-300 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white/80 backdrop-blur-sm transition-all duration-200"
                                      placeholder="{% trans 'Add any notes about this count session...' %}"></textarea>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-2xl p-6">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-info-circle text-white text-lg"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-sm font-semibold text-blue-800">
                                        Count Session Guidelines
                                    </h3>
                                    <div class="mt-3 text-sm text-blue-700">
                                        <ul class="space-y-2">
                                            <li class="flex items-start">
                                                <i class="fas fa-check-circle text-blue-500 mr-2 mt-0.5"></i>
                                                Count all items in each location carefully
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check-circle text-blue-500 mr-2 mt-0.5"></i>
                                                Note any damaged or defective items
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check-circle text-blue-500 mr-2 mt-0.5"></i>
                                                Report any missing items immediately
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check-circle text-blue-500 mr-2 mt-0.5"></i>
                                                Take your time to ensure accuracy
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check-circle text-blue-500 mr-2 mt-0.5"></i>
                                                You can pause and resume the count session
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <div class="flex items-center text-sm text-slate-600 bg-white/60 rounded-xl px-4 py-2">
                            <i class="fas fa-clock mr-2 text-amber-500"></i>
                            <span id="estimated-time">Estimated time: 30-60 minutes depending on section size</span>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row gap-3">
                            <a href="{% url 'stock_keeper:cycle_count' %}" 
                               class="inline-flex items-center justify-center px-6 py-3 border border-slate-300 rounded-xl text-sm font-semibold text-slate-700 bg-white/80 backdrop-blur-sm hover:bg-white transition-all duration-200 shadow-sm">
                                <i class="fas fa-times mr-2"></i>
                                Cancel
                            </a>
                            <button type="submit" 
                                    class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-amber-500 to-yellow-600 hover:from-amber-600 hover:to-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                                <i class="fas fa-play mr-2"></i>
                                Start Count Session
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
// Update estimated time based on total locations
document.getElementById('total_locations').addEventListener('input', function() {
    const locations = parseInt(this.value) || 0;
    const estimatedMinutes = Math.max(30, Math.ceil(locations * 1.5));
    
    const timeElement = document.getElementById('estimated-time');
    timeElement.textContent = `Estimated time: ${estimatedMinutes} minutes`;
});

// Auto-focus on section select when page loads
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('section').focus();
});
</script>
{% endblock %} 